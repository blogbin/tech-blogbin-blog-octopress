<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Rails | Tech.Blogbin's Blog]]></title>
  <link href="http://tech-blog.blogbin.info/blog/categories/rails/atom.xml" rel="self"/>
  <link href="http://tech-blog.blogbin.info/"/>
  <updated>2012-10-04T10:40:37+08:00</updated>
  <id>http://tech-blog.blogbin.info/</id>
  <author>
    <name><![CDATA[Tech Blogbin ]]></name>
    <email><![CDATA[Tech Blogbin <tech.blogbin@gmail.com>]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails Recipes Rails 3 Edition Recipe 1 Create Meaningful Many-to-Many Relationships]]></title>
    <link href="http://tech-blog.blogbin.info/blog/2012/10/03/rails-recipes-rails-3-edition-recipe-1-create-meaningful-many-to-many-relationships/"/>
    <updated>2012-10-03T23:50:00+08:00</updated>
    <id>http://tech-blog.blogbin.info/blog/2012/10/03/rails-recipes-rails-3-edition-recipe-1-create-meaningful-many-to-many-relationships</id>
    <content type="html"><![CDATA[<h4>关联模型</h4>

<p>Rails 中 ActiveRecord 两个模型之间的多对多关系很少简单用 has_and_belong_to_many 来表示，而是引入第三个模型（关联模型），将之前 A 和 B 的多对多关系，拆分为 A 和 C 的一对多，
B 和 C 的一对多。引入新的关联模型 C ，很容易在 A 和 B 关系上定义一些属性。</p>

<!--more-->


<p><blockquote><p>When modeling many-to-many relationships in Rails, many newcomers<br/>assume they should use the has_and_belongs_to_many() (habtm) macro with its<br/>associated join table. For years, application developers have been creating<br/>strangely named join tables in order to simply connect two tables. But habtm<br/>is best suited to relationships that have no attributes or meaning of their own.<br/>And, given some thought, almost every relationship in a Rails model deserves<br/>its own name to represent its function in the domain being modeled.</p></p><p><p>The idea with join models is that if your many-to-many relationship needs to have some richness<br/>in the association, instead of putting a simple, dumb join table in the middle<br/>of the relationship,</p></blockquote></p>

<p>migrate 创建 关联表（just simply connect two tables） 可以不需要定义 id 主键
``` ruby rr2/many_to_many/beginning_schema.rb
create_table :magazines_readers, :id => false do |t|</p>

<pre><code>t.integer :magazine_id
t.integer :reader_id
</code></pre>

<p>end
```
参阅：
<blockquote><p>By default, create_table will create a primary key called id. You can change the name of the primary key with the :primary_key option (don’t forget to update the corresponding model) or, if you don’t want a primary key at all (for example for a HABTM join table), you can pass the option :id => false. If you need to pass database specific options you can place an SQL fragment in the :options option. For example,</p></p><p><p>create_table :products, :options => "ENGINE=BLACKHOLE" do |t|<br/>  t.string :name, :null => false<br/>end<br/>will append ENGINE=BLACKHOLE to the SQL statement used to create the table (when using MySQL, the default is ENGINE=InnoDB).</p></blockquote>
<a href="http://guides.rubyonrails.org/migrations.html#creating-a-table">http://guides.rubyonrails.org/migrations.html#creating-a-table</a></p>

<h4>多个 has_many</h4>

<p>一个 Association 可以根据需要定义不同的 has_many，如：
``` ruby ManyToManyWithAttributesOnTheRelationship/app/models/magazine.rb
class Magazine &lt; ActiveRecord::Base</p>

<pre><code>has_many :subscriptions
has_many :readers, :through =&gt; :subscriptions
has_many :semiannual_subscribers,
    :through =&gt; :subscriptions,
    :source =&gt; :reader,
    :conditions =&gt; ['length_in_issues = 6']
</code></pre>

<p>end
```</p>

<h4>has_many 中 :calss 和 :source 的区别</h4>

<p>无法通过 has_many 的一个参数自动推断出 Rails ActiveRecord 模型名称时，如果 has_many 如果使用 :through ，需要设置 :source 参数，否者使用 :calss_name 参数。
<blockquote><p>```<br/>class Relationship &lt; ActiveRecord::Base<br/>  belongs_to :user,</p></p><p><pre><code>:class_name =&gt; 'User', :foreign_key =&gt; 'user_id'<br/></code></pre></p><p><p>  belongs_to :buddy,</p></p><p><pre><code>:class_name =&gt; 'User', :foreign_key =&gt; 'buddy_id'<br/></code></pre></p><p><p>end<br/>class User &lt; ActiveRecord::Base<br/>  has_many :relations_to,</p></p><p><pre><code>:foreign_key =&gt; 'user_id',  :class_name =&gt; 'Relationship'<br/></code></pre></p><p><p>  has_many :relations_from,</p></p><p><pre><code>:foreign_key =&gt; 'buddy_id', :class_name =&gt; 'Relationship'                             <br/></code></pre></p><p><p>  has_many :linked_to,</p></p><p><pre><code>:through =&gt; :relations_to,   :source =&gt; :buddy<br/></code></pre></p><p><p>  has_many :linked_from,</p></p><p><pre><code>:through =&gt; :relations_from, :source =&gt; :user<br/></code></pre></p><p><p>end<br/>```</p></blockquote>
参阅：</p>

<p><a href="http://stackoverflow.com/questions/4632408/need-help-to-understand-source-option-of-has-one-has-many-through-of-rails">http://stackoverflow.com/questions/4632408/need-help-to-understand-source-option-of-has-one-has-many-through-of-rails</a></p>

<p><a href="http://hlee.iteye.com/blog/1254723">http://hlee.iteye.com/blog/1254723</a></p>

<h4>更多关于 has_many 和 :through 信息参阅：</h4>

<p>[http://guides.rubyonrails.org/association_basics.html#the-has_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-association</p>

<p><a href="http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association">http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association</a></p>

<p><a href="http://guides.rubyonrails.org/association_basics.html#has_many-association-reference">http://guides.rubyonrails.org/association_basics.html#has_many-association-reference</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Could not find gem 'rails (= 3.2.8) ruby' in the gems available on this machine.]]></title>
    <link href="http://tech-blog.blogbin.info/blog/2012/09/15/could-not-find-gem-rails-equals-3-dot-2-8-ruby-in-the-gems-available-on-this-machine/"/>
    <updated>2012-09-15T22:47:00+08:00</updated>
    <id>http://tech-blog.blogbin.info/blog/2012/09/15/could-not-find-gem-rails-equals-3-dot-2-8-ruby-in-the-gems-available-on-this-machine</id>
    <content type="html"><![CDATA[<p>之前 Rails 项目的 Rails 版本升级到 3.2.8。在 Centos 6.x 和 MacOS 都比较顺利。</p>

<p>但有同事反馈 Ubuntu 12.x + RVM + Gemset 方式无法遇到麻烦，不管是执行 bundle install or gem install
```
liwy@ubuntu:~/.rvm/gems/ruby-1.9.3-p125/cache$ bundle install
Could not find gem 'rails (= 3.2.8) ruby' in the gems available on this machine.</p>

<p>liwy@ubuntu:~/.rvm/gems/ruby-1.9.3-p125/cache$ gem install rails -v 3.2.8
Could not find gem 'rails (= 3.2.8) ruby' in the gems available on this machine.
```</p>

<p>后来同事反馈，删除掉 rvm cache 的 <em>specs</em>.gz 相关的文件，重新执行 bundle install or gem install 成功
```
liwy@ubuntu:~/.rvm/gems/ruby-1.9.3-p125/cache$ rm -rf latest_specs.4.8.gz</p>

<p>liwy@ubuntu:~/.rvm/gems/ruby-1.9.3-p125/cache$ rm -rf specs.4.8.gz
```
怀疑是网络原因，造成下载的 gz 不完整，删掉重新下载，应该可以解决类似问题。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Resolving error: .css.scss has already been required]]></title>
    <link href="http://tech-blog.blogbin.info/blog/2012/09/13/resolving-error-css-dot-scss-has-already-been-required/"/>
    <updated>2012-09-13T00:01:00+08:00</updated>
    <id>http://tech-blog.blogbin.info/blog/2012/09/13/resolving-error-css-dot-scss-has-already-been-required</id>
    <content type="html"><![CDATA[<p>浏览器访问 Rails 的 Web 界面时，界面提示 app/assets/stylesheets/application.css.scss 出错</p>

<p>.css.scss has already been required</p>

<p>考虑后觉得可能是 css 和 javascript 重复引入的造成的。即 .css.scss 不能 require 和 import 重复的 css</p>

<!--more-->


<p>如 app/assets/stylesheets/application.css.scss
```
/<em>
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 </em>= require_self
 <em>= require_tree .
</em>/</p>

<p>// Example using 'Cerulean' bootswatch
//
// First import journal variables
@import "bootswatch/cerulean/variables";</p>

<p>// Then bootstrap itself
@import "bootstrap";</p>

<p>// Bootstrap body padding for fixed navbar
//body { padding-top: 40px; }</p>

<p>// Responsive styles go here in case you want them
@import "bootstrap-responsive";</p>

<p>// And finally bootswatch style itself
@import "bootswatch/cerulean/bootswatch";</p>

<p>// Whatever application styles you have go last
@import "admin";
```</p>

<p>修改为仅保留
```
// Example using 'Cerulean' bootswatch
//
// First import journal variables
@import "bootswatch/cerulean/variables";</p>

<p>// Then bootstrap itself
@import "bootstrap";</p>

<p>// Bootstrap body padding for fixed navbar
//body { padding-top: 40px; }</p>

<p>// Responsive styles go here in case you want them
@import "bootstrap-responsive";</p>

<p>// And finally bootswatch style itself
@import "bootswatch/cerulean/bootswatch";</p>

<p>// Whatever application styles you have go last
@import "admin";
```</p>

<p>同样.js 不能重复 require 相同的 js
如 app/assets/javascripts/application.js
```
//This is a manifest file that'll be compiled into including all the files listed below.
//Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
//It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.</p>

<p>//= require jquery
//= require jquery_ujs</p>

<p>//= require bootstraps
```</p>

<p>改为仅保留
<code>
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Upgrading to Rails 3.2.8]]></title>
    <link href="http://tech-blog.blogbin.info/blog/2012/09/12/upgrading-to-rails-3-dot-2-8/"/>
    <updated>2012-09-12T23:23:00+08:00</updated>
    <id>http://tech-blog.blogbin.info/blog/2012/09/12/upgrading-to-rails-3-dot-2-8</id>
    <content type="html"><![CDATA[<p>最近计划将 Rails 从 3.1.0 升级到 3.2.8 版本。</p>

<p>一是为解决 Rails 3.1.0 版本的 Security Issue，引入新功能；
二是为解决 Assets 相关的 Bugs，比如在 development 环境，scss 修改后无法动态编译，需要重启方能生效的问题；</p>

<!--more-->


<p>（ 2012 年 9 月 13 日更新）
如果使用 haml，需要升级 haml 版本至 3.1.4
``` ruby Gemfile
case RAILS_VERSION</p>

<p>  when RAILS_3_1_0</p>

<pre><code>gem "haml", "3.0.17"
</code></pre>

<p>  when RAILS_3_2_8</p>

<pre><code>gem "haml", "3.1.4"
</code></pre>

<p>end
```</p>

<p>否则启动 Rails 项目会出现 undefined method <code>delegate_template_exists?' 的错误
```
Uncaught exception: undefined method</code>delegate_template_exists?' for class `ActionView::Base'</p>

<pre><code> /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/template/patch.rb:16:in `alias_method'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/template/patch.rb:16:in `&lt;class:Base&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/template/patch.rb:12:in `&lt;module:ActionView&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/template/patch.rb:11:in `&lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/template.rb:60:in `&lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml.rb:36:in `block in init_rails'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml.rb:36:in `each'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml.rb:36:in `init_rails'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/railtie.rb:18:in `block (2 levels) in &lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `each'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/haml-3.0.17/lib/haml/railtie.rb:17:in `block in &lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/application/bootstrap.rb:69:in `block in &lt;module:Bootstrap&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/config/environment.rb:7:in `&lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/config.ru:4:in `block in &lt;main&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/config.ru:1:in `new'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/config.ru:1:in `&lt;main&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in &lt;top (required)&gt;'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
 /Users/blogbin/.rvm/gems/ruby-1.9.3-p0@appstore/gems/railties-3.2.8/lib/rails/commands.rb:50:in `&lt;top (required)&gt;'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/script/rails:6:in `require'
 /Users/blogbin/projects/workspaces/app_store/ruby/app_store/script/rails:6:in `&lt;top (required)&gt;' 
</code></pre>

<p>```</p>

<p>Gemfile 除了将 Rails 版本修改为 3.2.8 之外，需要调整 group assets 中 sass-rails, coffee-rails 的版本依赖。</p>

<p>为避免 Rails 版本升级失败，方便回退版本，在 Gemfile 定义一些变量和判断条件来做检查，如：</p>

<p>``` ruby Gemfile</p>

<h1>rails</h1>

<h1>rails version</h1>

<p>RAILS_3_2_8 = '3.2.8'
RAILS_3_1_0 = '3.1.0'</p>

<p>RAILS_VERSION = RAILS_3_2_8</p>

<p>case RAILS_VERSION</p>

<p>  when RAILS_3_1_0</p>

<pre><code>gem 'rails', '3.1.0'
</code></pre>

<p>  when RAILS_3_2_8</p>

<pre><code>gem 'rails', '3.2.8'
</code></pre>

<p>end</p>

<p>group :assets do</p>

<p>  case RAILS_VERSION</p>

<pre><code>when RAILS_3_1_0
  gem 'sass-rails', "  ~&gt; 3.1.0"
  gem 'coffee-rails', "~&gt; 3.1.0"
  gem 'uglifier'

when RAILS_3_2_8
  gem 'sass-rails',   '~&gt; 3.2.3'
  gem 'coffee-rails', '~&gt; 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms =&gt; :ruby

  gem 'uglifier', '&gt;= 1.0.3'
</code></pre>

<p>  end</p>

<p>end
```</p>

<p>运行 bundle install 之前，需要先删除 Gemfile.lock，以防原来的版本依赖带来的干扰
```
blogbins-MacBook-Pro:focus blogbin$ rm Gemfile.lock</p>

<p>blogbins-MacBook-Pro:focus blogbin$ bundle install
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Bootstrap and Bootswatch]]></title>
    <link href="http://tech-blog.blogbin.info/blog/2012/09/09/using-bootstrap/"/>
    <updated>2012-09-09T01:01:00+08:00</updated>
    <id>http://tech-blog.blogbin.info/blog/2012/09/09/using-bootstrap</id>
    <content type="html"><![CDATA[<p>Bootstrap 是 Twitter 开源免费提供的 CSS框架，它是快速开发Web应用程序的前端工具包。
它是一个CSS和HTML的集合，它使用了最新的浏览器技术，给Web开发提供了时尚的版式</p>

<p><a href="http://twitter.github.com/bootstrap/index.html">http://twitter.github.com/bootstrap/index.html</a></p>

<p><a href="https://github.com/twitter/bootstrap">https://github.com/twitter/bootstrap</a></p>

<p>中文翻译参见：
Twitter Bootstrap中文版/中文翻译
<a href="http://wrongwaycn.github.com/bootstrap/docs/index.html">http://wrongwaycn.github.com/bootstrap/docs/index.html</a></p>

<p>Bootstrap 默认只提供黑色和白色风格，也有一些付费的风格。如果想尝试免费的其它风格，可以试试看 Bootswatch
<a href="http://bootswatch.com/">http://bootswatch.com/</a></p>

<p><a href="https://github.com/maxim/bootswatch-rails">https://github.com/maxim/bootswatch-rails</a></p>

<p>Rails 项目引入 Bootstrap 和 Bootswatch 比较容易。</p>

<!--more-->


<p>修改 Gemfile
<code>ruby Gemfile
gem 'bootstrap-sass'
gem 'bootswatch-rails'
</code></p>

<p>在 app/assets/stylesheets/application.css.scs 通过 @import 引入 bootstrap 和 bootswatch 的 css</p>

<p>``` css app/assets/stylesheets/application.css.scss
// Example using 'Cerulean' bootswatch
//
// First import journal variables
@import "bootswatch/cerulean/variables";</p>

<p>// Then bootstrap itself
@import "bootstrap";</p>

<p>// Bootstrap body padding for fixed navbar
//body { padding-top: 40px; }</p>

<p>// Responsive styles go here in case you want them
@import "bootstrap-responsive";</p>

<p>// And finally bootswatch style itself
@import "bootswatch/cerulean/bootswatch";</p>

<p>// Whatever application styles you have go last
@import "video_recommendation_types";
```</p>

<p>Bootstrap 有些交互控件（如 Dropdown）需要一些 javascript，建议部署在 vertor/assets/javascripts目录
<code>
blogbins-MacBook-Pro:focus blogbin$ find vendor/assets/
vendor/assets/
vendor/assets//javascripts
vendor/assets//javascripts/bootstraps
vendor/assets//javascripts/bootstraps/bootstrap-collapse.js
vendor/assets//javascripts/bootstraps/bootstrap-dropdown.js
vendor/assets//javascripts/bootstraps/index.js
vendor/assets//stylesheets
vendor/assets//stylesheets/.gitkeep
</code></p>

<p>建议在该目录下创建 manifest 清单文件，引用其它 javascript 文件</p>

<p>```
blogbins-MacBook-Pro:focus blogbin$ cat vendor/assets//javascripts/bootstraps/index.js
//= require_tree .</p>

<p>blogbins-MacBook-Pro:focus blogbin$
```</p>

<p>在 app/assets/javascripts/application.js 引入需要的 javascript
``` javascript app/assets/javascripts/application.js
//This is a manifest file that'll be compiled into including all the files listed below.
//Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
//It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.</p>

<p>//= require jquery
//= require jquery_ujs</p>

<p>//= require bootstraps</p>

<p>// 可以继续需要引入其它 javascript 文件或清单文件
```</p>

<p>最后运行 bundle install 安装／更新 gems 之前，需要先删除 Gemfile.lock，以防原来的版本依赖带来的干扰
```
blogbins-MacBook-Pro:focus blogbin$ rm Gemfile.lock</p>

<p>blogbins-MacBook-Pro:focus blogbin$ bundle install
```</p>
]]></content>
  </entry>
  
</feed>
